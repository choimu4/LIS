<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naver Map</title>
    <script type="text/javascript"
        src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=q54y71b9jd"></script>
    <style>
        /* 지도 위에 버튼을 올리기 위한 스타일 */
        #mapWrapper {
            position: relative;
            width: 100%;
            height: 1000px;
        }
        
        #myLocationButton {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1; /* 지도보다 상위 레벨에 위치하도록 설정 */
        }
    </style>
</head>

<body>
    <div id="mapWrapper">
        <div id="map" style="width: 100%; height: 100%;"></div>
        <button id="myLocationButton">현재 위치로 이동</button>
    </div>

    <script>
        let lat;
        let lng;
        let circle;
        let me;
        let markers;
        let infoWindows;
        let zoom = 15; // 초기 줌 레벨
        let map;

        navigator.geolocation.getCurrentPosition(function (pos) {
            loadNaverMap(pos.coords.latitude, pos.coords.longitude);
        });

        function loadNaverMap(lat, lng) {
            map = new naver.maps.Map('map', {
                center: new naver.maps.LatLng(lat, lng),
                zoom: zoom,
                minZoom: 1,
                draggable: true,
                pinchZoom: true,
                scrollWheel: true,
                disableKineticPan: false,
                scaleControl: false,
                logoControl: true,
                logoControlOptions: {
                    position: naver.maps.Position.BOTTOM_RIGHT
                },
                mapDataControl: false,
                zoomControl: true,
                zoomControlOptions: {
                    position: naver.maps.Position.TOP_LEFT
                },
                mapTypeControl: false
            });

            // 현재 위치에 마커 추가
            var marker = new naver.maps.Marker({
                position: new naver.maps.LatLng(lat, lng),
                map: map,
                title: '현재 위치'
            });

            // "현재 위치로 이동" 버튼 클릭 이벤트 리스너
            document.getElementById('myLocationButton').addEventListener('click', function() {
                navigator.geolocation.getCurrentPosition(function (pos) {
                    var newLat = pos.coords.latitude;
                    var newLng = pos.coords.longitude;
                    var newPosition = new naver.maps.LatLng(newLat, newLng);

                    map.setCenter(newPosition); // 지도 중심을 현재 위치로 이동
                    marker.setPosition(newPosition); // 마커 위치를 현재 위치로 업데이트
                });
            });
        }
    </script>
</body>

</html>
